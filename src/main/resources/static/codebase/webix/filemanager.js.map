{"version":3,"file":"filemanager.js","sources":["../sources/views/actions.js","../sources/types.js","../sources/locale.js","../sources/widgets/filelist.js","../sources/widgets/filemenu.js","../sources/widgets/filetree.js","../sources/widgets/filetable.js","../sources/widgets/fileview.js","../sources/widgets/path.js","../sources/defaults.js","../sources/history.js","../sources/sort.js","../sources/load.js","../sources/path.js","../sources/save.js","../sources/views/modes.js","../sources/views/modeviews.js","../sources/views/table.js","../sources/views/toggle.js","../sources/views/tree.js","../sources/ui.js","../sources/views/mainlayout.js","../sources/views/toolbar.js","../sources/views/menu.js","../sources/views/back.js","../sources/views/forward.js","../sources/views/up.js","../sources/views/path.js","../sources/views/search.js","../sources/views/bodylayout.js","../sources/views/treelayout.js","../sources/views/panel.js","../sources/views/treetoolbar.js","../sources/views/expandall.js","../sources/views/collapseall.js","../sources/views/files.js","../sources/views/columns.js","../sources/views/upload.js","../sources/filemanager.js","../sources/tree.js"],"sourcesContent":["function getData(){\n\treturn [\n\t\t{id: \"copy\", batch: \"item\", method: \"markCopy\",  icon: \"fm-copy\", value: webix.i18n.filemanager.copy},\n\t\t{id: \"cut\", batch: \"item\", method: \"markCut\", icon: \"fm-cut\", value: webix.i18n.filemanager.cut},\n\t\t{id: \"paste\",  method: \"pasteFile\", icon: \"fm-paste\", value: webix.i18n.filemanager.paste},\n\t\t{ $template:\"Separator\" },\n\t\t{id: \"create\", method: \"createFolder\", icon: \"fm-folder\", value: webix.i18n.filemanager.create},\n\t\t{id: \"remove\", batch: \"item\", method: \"deleteFile\", icon: \"fm-delete\", value: webix.i18n.filemanager.remove},\n\t\t{id: \"edit\", batch: \"item\", method: \"editFile\",  icon: \"fm-edit\", value: webix.i18n.filemanager.rename},\n\t\t{id: \"upload\", method: \"uploadFile\", event:\"UploadDialog\", icon: \"fm-upload\", value: webix.i18n.filemanager.upload}\n\t];\n}\n\nexport function init(view){\n\tview.attachEvent(\"onComponentInit\", () => ready(view));\n\n\tvar templateName = view.config.templateName;\n\tvar data = getData();\n\n\n\tvar popup = {\n\t\tview: \"filemenu\",\n\t\tid:\"actions\",\n\t\twidth: 200,\n\t\tpadding:0,\n\t\tautofocus: false,\n\t\tcss: \"webix_fmanager_actions\",\n\t\ttemplate: function(obj,common){\n\t\t\tvar name = templateName(obj,common);\n\t\t\tvar icon = obj.icon.indexOf(\"fm-\") == -1?obj.icon:\"webix_fmanager_icon \"+obj.icon;\n\t\t\treturn \"<span class='\"+icon+\"'></span> \"+name+\"\";\n\t\t},\n\t\tdata: data\n\t};\n\n\n\tview.callEvent(\"onViewInit\", [\"actions\", popup]);\n\tview._contextMenu = view.ui(popup);\n\tview.attachEvent(\"onDestruct\",function(){\n\t\tview._contextMenu.destructor();\n\t});\n}\n\nfunction ready(view){\n\tvar menu = view.getMenu();\n\tif(menu){\n\t\tmenu.attachEvent(\"onItemClick\",function(id,e){\n\t\t\tvar obj = this.getItem(id);\n\t\t\tvar method = view[obj.method]||view[id];\n\t\t\tif(method){\n\t\t\t\tvar active = view.getActive();\n\t\t\t\tif(view.callEvent(\"onbefore\"+(obj.event||obj.method||id),[active])){\n\t\t\t\t\tif(!(id==\"upload\" && view.config.legacyUploader)){\n\t\t\t\t\t\tif(view._uploadPopup)\n\t\t\t\t\t\t\tview._uploadPopup.hide();\n\t\t\t\t\t\tmenu.hide();\n\t\t\t\t\t}\n\t\t\t\t\tvar args = [active];\n\t\t\t\t\tif(id==\"upload\"){\n\t\t\t\t\t\te = webix.html.pos(e);\n\t\t\t\t\t\targs.push(e);\n\t\t\t\t\t}\n\t\t\t\t\twebix.delay(function(){\n\t\t\t\t\t\tmethod.apply(view,args);\n\t\t\t\t\t\tview.callEvent(\"onafter\"+(obj.event||obj.method||id),[]);\n\t\t\t\t\t});\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t});\n\t\tmenu.attachEvent(\"onBeforeShow\",function(e){\n\t\t\tmenu.filter(\"\");\n\t\t\tmenu.hide();\n\t\t\tvar c = menu.getContext();\n\n\t\t\t//context menu over empty area \n\t\t\tif(c && c.obj && !c.id)\n\t\t\t\tc.obj.unselectAll();\n\t\t\t\n\t\t\tif(c && c.obj)\n\t\t\t\treturn c.obj.callEvent(\"onBeforeMenuShow\",[c.id,e]);\n\n\t\t\treturn true;\n\t\t});\n\n\t}\n}\n","// tree type\nwebix.type(webix.ui.tree,{\n\tname: \"FileTree\",\n\tcss: \"webix_fmanager_tree\",\n\tdragTemplate: webix.template(\"#value#\"),\n\ticon:function(obj){\n\t\tvar html = \"\";\n\t\tfor(var i =1; i < obj.$level; i++){\n\t\t\thtml += \"<div class='webix_tree_none'></div>\";\n\t\t}\n\t\tif(obj.webix_child_branch && !obj.$count){\n\t\t\thtml += \"<div class='webix_tree_child_branch webix_fmanager_icon webix_tree_close'></div>\";\n\t\t}\n\t\telse if (obj.$count>0){\n\t\t\tif (obj.open)\n\t\t\t\thtml += \"<div class='webix_fmanager_icon webix_tree_open'></div>\";\n\t\t\telse\n\t\t\t\thtml += \"<div class='webix_fmanager_icon webix_tree_close'></div>\";\n\t\t} else\n\t\t\thtml += \"<div class='webix_tree_none'></div>\";\n\t\treturn html;\n\t},\n\tfolder:function(obj){\n\t\tif (obj.$count && obj.open)\n\t\t\treturn \"<div class='webix_fmanager_icon webix_folder_open'></div>\";\n\t\treturn \"<div class='webix_fmanager_icon webix_folder'></div>\";\n\t}\n});\n// dataview type\nwebix.type(webix.ui.dataview, {\n\tname:\"FileView\",\n\tcss: \"webix_fmanager_files\",\n\theight: 110,\n\tmargin: 10,\n\twidth: 150,\n\ttemplate: function(obj,common){\n\t\tvar css = \"webix_fmanager_data_icon\";\n\t\tvar name = common.templateName(obj,common);\n\t\treturn \"<div class='webix_fmanager_file'><div class='\"+css+\"'>\"+common.templateIcon(obj,common)+\"</div>\"+name+\"</div>\";\n\t}\n});","// locale values\nwebix.i18n.filemanager = {\n\tactions: \"Actions\",\n\tback: \"Back\",\n\tforward: \"Forward\",\n\tlevelUp: \"Level Up\",\n\tname: \"Name\",\n\tsize: \"Size\",\n\ttype: \"Type\",\n\tdate: \"Date\",\n\tcopy: \"Copy\",\n\tcut: \"Cut\",\n\tpaste: \"Paste\",\n\tupload: \"Upload\",\n\tremove: \"Delete\",\n\tcreate: \"Create Folder\",\n\trename: \"Rename\",\n\tlocation: \"Location\",\n\tselect: \"Select Files\",\n\tsizeLabels: [\"B\",\"KB\",\"MB\",\"GB\"],\n\ticonsView: \"Icons View\",\n\ttableView: \"Table View\",\n\thideTree: \"Hide Tree\",\n\tshowTree: \"Show Tree\",\n\tcollapseTree: \"Collapse Tree\",\n\texpandTree: \"Expand Tree\",\n\tsaving: \"Saving...\",\n\terrorResponse: \"Error: changes were not saved!\",\n\treplaceConfirmation: \"The folder already contains files with such names. Would you like to replace existing files ?\",\n\tcreateConfirmation: \"The folder with such a name already exists. Would you like to replace it ?\",\n\trenameConfirmation: \"The file with such a name already exists. Would you like to replace it ?\",\n\tyes: \"Yes\",\n\tno: \"No\",\n\ttypes:{\n\t\tfolder: \"Folder\",\n\t\tdoc: \"Document\",\n\t\texcel: \"Excel\",\n\t\tpdf: \"PDF\",\n\t\tpp: \"PowerPoint\",\n\t\ttext: \"Text File\",\n\t\tvideo: \"Video File\",\n\t\timage: \"Image\",\n\t\tcode: \"Code\",\n\t\taudio: \"Audio\",\n\t\tarchive: \"Archive\",\n\t\tfile: \"File\"\n\t}\n};\n","webix.protoUI({\n\tname:\"filelist\"\n}, webix.EditAbility, webix.ui.list);","webix.protoUI({\n\tname:\"filemenu\"\n}, webix.ContextHelper, webix.ui.submenu);","// editable Tree\nwebix.protoUI({\n\tname:\"filetree\",\n\t$dragHTML:function(item, pos){\n\t\tvar ctx = webix.DragControl.getContext();\n\t\tvar type = this.type;\n\t\tvar text = type.dragTemplate(item,type);\n\t\tvar size = webix.html.getTextSize(text);\n\t\tvar posView = webix.html.offset(this.$view);\n\t\tvar offset = pos.x - posView.x;\n\t\tctx.x_offset = offset > size.width? - size.width/4 : -offset;\n\t\tctx.y_offset = - size.height/2;\n\t\treturn \"<div class='webix_tree_item webix_fmanager_drag' style='width:auto'>\"+text+\"</div>\";\n\t}\n}, webix.EditAbility, webix.ui.tree);","// Datatable with customized drag element\nwebix.protoUI({\n\tname:\"filetable\",\n\t$dragHTML:function(item, pos){\n\t\tvar ctx = webix.DragControl.getContext();\n\t\tvar index = this.getColumnIndex(\"value\");\n\t\tvar text = this.config.columns[index].template(item,this.type);\n\t\tvar size = webix.html.getTextSize(text);\n\n\t\tvar posView = webix.html.offset(this.$view);\n\t\tvar offset = pos.clientX - posView.x;\n\t\t\n\t\tctx.x_offset = offset > size.width? - size.width/4 : -offset;\n\t\tctx.y_offset = - size.height/2;\n\n\t\tvar html=\"<div class='webix_dd_drag webix_fmanager_drag' >\";\n\t\thtml += \"<div style='width:\"+(size.width+40)+\"px'>\"+ text+\"</div>\";\n\t\treturn html+\"</div>\";\n\t}\n}, webix.ui.datatable);","// editable Dataview\nwebix.protoUI({\n\tname:\"fileview\"\n}, webix.EditAbility, webix.ui.dataview);","// a new view for path display, based on List view\nwebix.protoUI({\n\tname: \"path\",\n\tdefaults:{\n\t\tlayout: \"x\",\n\t\tseparator: \",\",\n\t\tscroll: false\n\t},\n\t$skin:function(){\n\t\tthis.type.height = webix.skin.$active.buttonHeight||webix.skin.$active.inputHeight;\n\t},\n\t$init: function(){\n\t\tthis.$view.className += \" webix_path\";\n\t},\n\tvalue_setter: function(value){\n\t\tthis.setValue();\n\t\treturn \tvalue;\n\t},\n\tsetValue: function(values){\n\t\tthis.clearAll();\n\t\tif(values){\n\t\t\tif(typeof(values) == \"string\"){\n\t\t\t\tvalues = values.split(this.config.separator);\n\t\t\t}\n\t\t\tthis.parse(webix.copy(values));\n\t\t}\n\t},\n\tgetValue: function(){\n\t\treturn this.serialize();\n\t}\n},webix.ui.list);","export const values = {\n\tmodes: [\"table\",\"files\"],\n\tmode: \"table\",\n\thandlers: {},\n\tstructure:{},\n\tfsIds: true,\n\ttemplateName: webix.template(\"#value#\"),\n\ttemplateSize: function(obj){\n\t\tvar value = obj.size;\n\t\tvar labels = webix.i18n.filemanager.sizeLabels;\n\t\tvar pow = 0;\n\t\twhile(value/1024 >1){\n\t\t\tvalue = value/1024;\n\t\t\tpow++;\n\t\t}\n\t\tvar isInt = (parseInt(value,10) == value);\n\n\t\tvar format = webix.Number.numToStr({\n\t\t\tdecimalDelimiter:webix.i18n.decimalDelimiter,\n\t\t\tgroupDelimiter:webix.i18n.groupDelimiter,\n\t\t\tdecimalSize : isInt?0:webix.i18n.groupSize\n\t\t});\n\n\t\treturn format(value)+\"\"+labels[pow];\n\t},\n\ttemplateType: function(obj){\n\t\tvar types = webix.i18n.filemanager.types;\n\t\treturn types&&types[obj.type]?types[obj.type]:obj.type;\n\t},\n\ttemplateDate: function(obj){\n\t\tvar date = obj.date;\n\t\tif(typeof(date) != \"object\"){\n\t\t\tdate = new Date(parseInt(obj.date,10)*1000);\n\t\t}\n\t\treturn webix.i18n.fullDateFormatStr(date);\n\t},\n\ttemplateCreate: function(){\n\t\treturn {value: \"newFolder\", type: \"folder\", date: new Date()};\n\t},\n\ttemplateIcon: function(obj,common){\n\t\treturn \"<div class='webix_fmanager_icon fm-\"+(common.icons[obj.type]||common.icons.file)+\"'></div>\";\n\t},\n\tuploadProgress: {\n\t\ttype:\"icon\",\n\t\thide:false\n\t},\n\t//idChange: true,\n\ticons: {\n\t\tfolder: \"folder\",\n\t\texcel: \"file-excel\",\n\t\tpdf: \"file-pdf\",\n\t\tpp: \"file-powerpoint\",\n\t\ttext: \"file-text\",\n\t\tvideo: \"file-video\",\n\t\timage: \"file-image\",\n\t\tcode: \"file-code\",\n\t\taudio: \"file-audio\",\n\t\tarchive: \"file-archive\",\n\t\tdoc: \"file-word\",\n\t\tfile: \"file\"\n\t}\n};","export function init(view){\n\tview._cursorHistory = webix.extend([],webix.PowerArray,true);\n\tview.$ready.push(()=>setHandlers(view));\n}\n\nfunction setHandlers(view){\n\tview.attachEvent(\"onAfterLoad\",function(){\n\t\tif(!view.config.disabledHistory){\n\t\t\tvar state = decodeURIComponent(window.location.hash);\n\t\t\tif (state && state.indexOf(\"#!/\") === 0){\n\t\t\t\tview.setPath(state.replace(\"#!/\",\"\"));\n\t\t\t}\n\t\t}\n\t});\n\n\tview.attachEvent(\"onAfterCursorChange\", function(id){\n\t\tif(!view._historyIgnore){\n\t\t\tif(!view._historyCursor )\n\t\t\t\tview._cursorHistory.splice(1);\n\t\t\tif(view._cursorHistory[this._historyCursor] != id){\n\t\t\t\tif(view._cursorHistory.length==20)\n\t\t\t\t\tview._cursorHistory.splice(0,1);\n\t\t\t\tview._cursorHistory.push(id);\n\t\t\t\tview._historyCursor = this._cursorHistory.length-1;\n\t\t\t}\n\t\t}\n\t\tview._historyIgnore = false;\n\t\tif(!view.config.disabledHistory)\n\t\t\tpushHistory(view, id);\n\t\tview.callEvent(\"onHistoryChange\",[id, view._cursorHistory,view._historyCursor]);\n\t});\n}\n\nfunction pushHistory(view,path){\n\tpath = path||view.getCursor();\n\n\tif(window.history && window.history.replaceState){\n\t\twindow.history.replaceState({ webix:true, id:view.config.id, value:path }, \"\", \"#!/\"+path);\n\t}\n\telse{\n\t\twindow.location.hash =  \"#!/\"+path;\n\t}\n}\n\nexport function changeCursor(view, step){\n\tif(view._cursorHistory.length>1){\n\t\tvar index = view._historyCursor + step;\n\t\tif(index>-1 && index < view._cursorHistory.length){\n\t\t\tview._historyIgnore = true;\n\t\t\tview._historyCursor = index;\n\t\t\tview.setCursor(view._cursorHistory[index]);\n\t\t}\n\t}\n\treturn view.getCursor();\n}","export function sortData(sort, data){\n\tvar sorter = webix.DataStore.prototype.sorting.create(sort);\n\tvar folders = [];\n\tvar files = [];\n\tfor(var i =0; i < data.length; i++){\n\t\tif(data[i].type == \"folder\")\n\t\t\tfolders.push(data[i]);\n\t\telse\n\t\t\tfiles.push(data[i]);\n\t}\n\tfolders.sort(sorter);\n\tfiles.sort(sorter);\n\treturn folders.concat(files);\n}","import * as sorting from \"./sort\";\n\nexport function init(view){\n\tview.attachEvent(\"onBeforeCursorChange\", function(){\n\t\tview.$skipDynLoading = false;\n\t\treturn true;\n\t});\n\tsetDataParsers(view);\n}\n\nfunction setDataParsers(view){\n\tview.dataParser = {\n\t\tfiles: function(obj, data){\n\t\t\tif(this.config.noFileCache){\n\t\t\t\tclearBranch(this, obj.id);\n\t\t\t}\n\t\t\telse\n\t\t\t\tobj.webix_files = 0;\n\n\t\t\tparseData(this, data);\n\t\t},\n\t\tbranch : function(obj, data){\n\t\t\tif(this.config.noFileCache){\n\t\t\t\tclearBranch(this, obj.id);\n\t\t\t}\n\t\t\telse{\n\t\t\t\tobj.webix_branch = 0;\n\t\t\t\tobj.webix_child_branch = 0;\n\t\t\t}\n\n\t\t\tparseData(this, data);\n\t\t}\n\t};\n}\nexport function loadDynData(view, url, obj, mode, open){\n\tview.showProgress();\n\tif(view.callEvent(\"onBeforeDynLoad\", [url, obj, mode, open])){\n\t\tif (url.load)\n\t\t\treturn url.load(null, { action: mode, source: obj.id})\n\t\t\t\t.then(\n\t\t\t\t\tfunction(data){\n\t\t\t\t\t\tview.hideProgress();\n\t\t\t\t\t\tdata = convertData(view, data);\n\t\t\t\t\t\tif(open)\n\t\t\t\t\t\t\tobj.open = true;\n\n\t\t\t\t\t\tif(view.callEvent(\"onBeforeDynParse\", [obj, data, mode])){\n\t\t\t\t\t\t\tview.dataParser[mode].call(view, obj, data);\n\t\t\t\t\t\t\tview.callEvent(\"onAfterDynParse\", [obj, data, mode]);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tfunction(){\n\t\t\t\t\t\tview.hideProgress();\n\t\t\t\t\t\tview.callEvent(\"onDynLoadError\",[]);\n\t\t\t\t\t}\n\t\t\t\t);\n\t}\n}\n\nexport function clearBranch(view, id){\n\tvar items = [];\n\n\tview.data.eachChild(id,function(item){\n\t\tif(!view.data.branch[item.id] && item.type != \"folder\")\n\t\t\titems.push(item.id);\n\t},view,true);\n\n\tfor(var i=0; i< items.length; i++){\n\t\tview.remove(items[i]);\n\t}\n}\n\nexport function parseData(view, data){\n\tview.parse(data);\n\tview.$skipDynLoading = true;\n\tview._refreshActiveFolder();\n\tview.$skipDynLoading = false;\n}\n\nexport function openFolders(view, folders){\n\tvar dynMode, i, pItem;\n\tvar defer = webix.promise.defer();\n\tdynMode = getDynMode(view);\n\n\tif(dynMode && folders.length){\n\t\tfor(i =0; i < folders.length; i++){\n\t\t\tpItem = view.getItem(folders[i]);\n\t\t\tif(!(pItem && !pItem[\"webix_\" + dynMode])){\n\t\t\t\topenDynFolder(view,folders.slice(i), dynMode, defer);\n\t\t\t\treturn defer;\n\t\t\t}\n\t\t\telse{\n\t\t\t\tpItem.open = true;\n\t\t\t\tif(view.$$(\"tree\"))\n\t\t\t\t\tview.$$(\"tree\").refresh(folders[i]);\n\t\t\t}\n\t\t}\n\t\tdefer.resolve(folders[i]);\n\t}\n\telse{\n\t\tdefer.reject();\n\t}\n\treturn defer;\n}\nfunction openDynFolder(view,ids, mode, defer){\n\tvar obj = view.getItem(ids[0]);\n\tview.showProgress();\n\tvar url = view.config.handlers[mode];\n\tif (url.load)\n\t\treturn url.load(null, { action: mode, source: ids[0]})\n\t\t\t.then(\n\t\t\t\tfunction(data){\n\t\t\t\t\tview.hideProgress();\n\t\t\t\t\tdata = convertData(view, data);\n\t\t\t\t\tif(view.callEvent(\"onBeforeDynParse\", [obj, data, mode])){\n\t\t\t\t\t\tobj.open = true;\n\t\t\t\t\t\tview.dataParser[mode].call(view, obj, data);\n\n\t\t\t\t\t\tvar lastId = ids.shift();\n\t\t\t\t\t\tif(ids.length && view.getItem(ids[0]).type == \"folder\"){\n\t\t\t\t\t\t\topenDynFolder(view,ids, mode, defer);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tview.refreshCursor();\n\t\t\t\t\t\t\tdefer.resolve(lastId);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tview.callEvent(\"onAfterDynParse\", [obj, data, mode]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n}\n\nexport function getDynMode(view){\n\tfor(var mode in view.dataParser){\n\t\tif (view.config.handlers[mode]) {\n\t\t\treturn mode;\n\t\t}\n\t}\n\treturn null;\n}\nexport function loadSearchData(view, url, id, value){\n\tvar params =  { action:\"search\", source: id, text: value};\n\tif(view.callEvent(\"onBeforeSearchRequest\",[id, params])){\n\t\tif (url.load)\n\t\t\treturn url.load(null, params)\n\t\t\t\t.then(\n\t\t\t\t\tfunction(data){\n\t\t\t\t\t\tview.hideProgress();\n\t\t\t\t\t\tdata = convertData(view, data);\n\t\t\t\t\t\tparseSearchData(view, data);\n\t\t\t\t\t\tview.$searchValue = value;\n\t\t\t\t\t},\n\t\t\t\t\tfunction(){\n\t\t\t\t\t\tview.hideProgress();\n\t\t\t\t\t}\n\t\t\t\t);\n\t}\n}\nexport function parseSearchData(view, data){\n\tview.callEvent(\"onShowSearchResults\",[]);\n\tview.$searchResults = true;\n\tvar cell = view.$$(view.config.mode);\n\tif(cell && cell.filter){\n\t\tcell.clearAll();\n\t\tif(view.sortState && view.sortState.view == cell.config.id)\n\t\t\tdata = sorting.sortData(view.sortState.sort, data);\n\t\tcell.parse(data);\n\t}\n}\n\nfunction convertData(view, data){\n\tif (data && typeof data.text === \"function\")\n\t\tdata = data.text();\n\treturn view.data.driver.toObject(data);\n}","export function getPath(view, id){\n\tid = id||view.getCursor();\n\tvar path = [];\n\twhile(id && view.getItem(id)){\n\t\tpath.push(id);\n\t\tid = view.getParentId(id);\n\t}\n\treturn path.reverse();\n}\n\nexport function getPathNames(view, id){\n\tid = id||view.getCursor();\n\tvar item = null;\n\tvar path = [];\n\twhile(id && view.getItem(id)){\n\t\titem = view.getItem(id);\n\t\tpath.push({id:id, value:view.config.templateName(item)});\n\t\tid = view.getParentId(id);\n\t}\n\treturn path.reverse();\n}\n\n\nexport function setPath(view, id){\n\tvar pId = id;\n\twhile(pId && view.getItem(pId)){\n\t\tview.callEvent(\"onPathLevel\",[pId]);\n\t\tpId = view.getParentId(pId);\n\t}\n\tif(view.getItem(id)){\n\t\tif(id!= view.getCursor()){\n\t\t\tview.setCursor(id);\n\t\t\tview.callEvent(\"onPathComplete\",[id]);\n\t\t}\n\n\t}else{\n\t\t// dynamic loading\n\t\tvar folders = getParentFolders(id);\n\t\tview.openFolders(folders).then(function(){\n\t\t\tview.setCursor(id);\n\t\t\tview.callEvent(\"onPathComplete\",[id]);\n\t\t});\n\t}\n\n}\n\nexport function getParentFolders(id){\n\tvar i, parts,\n\t\tids = [];\n\tif(typeof id == \"string\"){\n\t\tparts = id.replace(/^\\//,\"\").split(\"/\");\n\t\tfor(i=0; i< parts.length; i++){\n\t\t\tids.push(parts.slice(0, i+1).join(\"/\"));\n\t\t}\n\t}\n\treturn ids;\n}","export function makeSaveRequest(view, url, obj, callback){\n\tif(view.callEvent(\"onBeforeRequest\",[url, obj])){\n\t\tshowSaveMessage(view);\n\t\tif(url.load){\n\t\t\turl.load(null, webix.copy(obj))\n\t\t\t\t.then(\n\t\t\t\t\tfunction(data){\n\t\t\t\t\t\tif (data && typeof data.text === \"function\")\n\t\t\t\t\t\t\tdata = data.text();\n\t\t\t\t\t\tdata = view.data.driver.toObject(data);\n\t\t\t\t\t\thideSaveMessage(view);\n\t\t\t\t\t\tif(view.callEvent(\"onSuccessResponse\",[obj,data]) && callback)\n\t\t\t\t\t\t\tcallback.call(view,obj,data);\n\t\t\t\t\t},\n\t\t\t\t\tfunction(error){\n\t\t\t\t\t\tif(view.callEvent(\"onErrorResponse\", [obj, error]))\n\t\t\t\t\t\t\terrorHandler(view, error);\n\t\t\t\t\t}\t\n\t\t\t\t);\n\t\t}\n\t}\n}\n\nfunction showSaveMessage(view, message){\n\tview._saveMessageDate = new Date();\n\tif (!view._saveMessage){\n\t\tview._saveMessage = webix.html.create(\"DIV\",{ \"class\":\"webix_fmanager_save_message\"},\"\");\n\t\tview.$view.style.position = \"relative\";\n\t\twebix.html.insertBefore(view._saveMessage, view.$view);\n\t}\n\tvar msg = \"\";\n\tif (!message) {\n\t\tmsg = webix.i18n.filemanager.saving;\n\t} else{\n\t\tmsg = webix.i18n.filemanager.errorResponse;\n\t}\n\n\tview._saveMessage.innerHTML = msg;\n}\n\nfunction hideSaveMessage(view){\n\tif (view._saveMessage){\n\t\twebix.html.remove(view._saveMessage);\n\t\tview._saveMessage = null;\n\t}\n}\n\nexport function errorHandler(view){\n\t// reload data on error response\n\tvar url = view.data.url;\n\tif(url){\n\t\tvar driver = view.data.driver;\n\t\tshowSaveMessage(view, true);\n\n\t\twebix.ajax().get(url, {success:function(text, response){\n\t\t\tvar data = driver.toObject(text, response);\n\t\t\tif (data){\n\t\t\t\tdata = driver.getDetails(driver.getRecords(data));\n\t\t\t\tview.clearAll();\n\t\t\t\tview.parse(data);\n\t\t\t\tview.data.url = url;\n\t\t\t}\n\t\t},error:function(){}});\n\t}\n}","export function init(view,settings){\n\tview.attachEvent(\"onComponentInit\", () => ready(view));\n\n\tvar options = [];\n\n\tsettings.modes.forEach(function(mode){\n\t\tif(mode == \"table\")\n\t\t\toptions.push(getModeConfig(mode, \"table\"));\n\t\telse if(mode == \"files\")\n\t\t\toptions.push(getModeConfig(mode, \"icons\"));\n\t});\n\n\tvar config = { view: \"segmented\", width: 70, options: options, css:\"webix_fmanager_modes\", value: settings.mode};\n\n\treturn config;\n}\n\nfunction getModeConfig(mode, tooltip){\n\treturn {\n\t\tid: mode,\n\t\twidth: 32,\n\t\tvalue: \"<div class=\\\"webix_fmanager_bar_icon webix_fmanager_\"+mode+\"_mode \\\"></div>\",\n\t\ttooltip:webix.i18n.filemanager[tooltip+\"View\"]\n\t};\n}\n\nfunction ready(view){\n\tif(view.$$(\"modes\")){\n\t\tview.$$(\"modes\").attachEvent(\"onBeforeTabClick\",function(id){\n\t\t\tvar value = view.$$(\"modes\").getValue();\n\t\t\tif(view.callEvent(\"onBeforeModeChange\",[value,id])){\n\t\t\t\tif(view.$$(id)){\n\t\t\t\t\tview.config.mode = id;\n\t\t\t\t\tview.$$(id).show();\n\t\t\t\t\tview.callEvent(\"onAfterModeChange\",[value,id]);\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t});\n\t}\n}","import * as sorting from \"../sort\";\n\nexport function init(view, settings){\n\tview.attachEvent(\"onComponentInit\", () => ready(view));\n\n\treturn {\n\t\tanimate: false,\n\t\tcells: (settings.modes?webix.copy(settings.modes):[])\n\t};\n}\n\nfunction ready(view){\n\tvar i, mCell,\n\t\tcell = view.$$(view.config.mode),\n\t\tmodes = view.config.modes;\n\n\tif(cell){\n\t\tcell.show();\n\t\tview.attachEvent(\"onBeforeCursorChange\", function(){\n\t\t\tvar cell = view.$$(view.config.mode);\n\t\t\tif(cell)\n\t\t\t\tcell.unselect();\n\t\t\treturn true;\n\t\t});\n\t\tview.attachEvent(\"onAfterCursorChange\", function(){\n\t\t\tvar cell = view.$$(view.config.mode);\n\t\t\tif(cell)\n\t\t\t\tcell.editStop();\n\t\t});\n\t}\n\n\tif(modes){\n\t\tfor(i =0; i < modes.length; i++) {\n\t\t\tmCell = view.$$(modes[i]);\n\t\t\tif (mCell && mCell.filter) {\n\t\t\t\taddCellConfig(view, mCell);\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction addCellConfig(view, cell){\n\tbindData(view, cell);\n\tapplyTemplates(view, cell);\n\tsetCellHandlers(view, cell);\n\t// link with context menu\n\tvar menu = view.getMenu();\n\tif (menu && !view.config.readonly)\n\t\taddMenuHandlers(view, cell, menu);\n\t//read-only\n\tif(view.config.readonly){\n\t\tcell.define(\"drag\",false);\n\t\tcell.define(\"editable\",false);\n\t}\n}\n\nfunction bindData(view, cell){\n\tview.data.attachEvent(\"onClearAll\", () => cell.clearAll());\n\n\tview.data.attachEvent(\"onIdChange\",(oldId,newId) => {\n\t\tif(cell.data.pull[oldId])\n\t\t\tcell.data.changeId(oldId,newId);\n\t});\n\n\t// we do not need call binding on row selection\n\tcell.attachEvent(\"onBeforeSelect\", function(){\n\t\tcell.$skipBinding = true;\n\t});\n\tview.attachEvent(\"onBeforeCursorChange\", function(){\n\t\tcell.$skipBinding = false;\n\t});\n\tview.attachEvent(\"onAfterCursorChange\", function(){\n\t\tcell.$skipBinding = false;\n\t});\n\tcell.bind(view, \"$data\", (obj, source) => {\n\t\tvar url;\n\t\tif(cell.$skipBinding)\n\t\t\treturn false;\n\t\tif (!obj) return cell.clearAll();\n\n\t\tif (!view.$searchResults) {\n\t\t\tif(!view.$skipDynLoading){\n\t\t\t\tfor(var mode in view.dataParser){\n\t\t\t\t\tif(!url && obj[\"webix_\"+mode]) {\n\t\t\t\t\t\turl = view.config.handlers[mode];\n\t\t\t\t\t\tif (url) {\n\t\t\t\t\t\t\tview.$skipDynLoading = true;\n\t\t\t\t\t\t\tview.loadDynData(url, obj, mode);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t// import child items\n\t\t\timportSelectedBranch(view, cell, source, obj);\n\t\t}\n\t});\n}\n\nfunction importSelectedBranch(view, target, source, obj){\n\tvar data = [].concat(webix.copy(source.data.getBranch(obj.id))).concat(obj.files || []);\n\tif(view.sortState && view.sortState.view == target.config.id)\n\t\tdata = sorting.sortData(view.sortState.sort, data);\n\ttarget.data.importData(data, true);\n}\n\n\n\nfunction applyTemplates(view, cell){\n\tcell.type.icons = view.config.icons;\n\tcell.type.templateIcon = view.config.templateIcon;\n\tcell.type.templateName = view.config.templateName;\n\tcell.type.templateSize = view.config.templateSize;\n\tcell.type.templateDate = view.config.templateDate;\n\tcell.type.templateType = view.config.templateType;\n}\n\nfunction addMenuHandlers(view,cell,menu){\n\tcell.on_context.webix_view = function(e,id){\n\t\tid = this.locate(e.target|| e.srcElement);\n\t\tif(!id){\n\t\t\tif(menu.setContext)\n\t\t\t\tmenu.setContext({ obj:webix.$$(e)});\n\t\t\tmenu.show(e);\n\t\t\twebix.html.preventEvent(e);\n\t\t}\n\n\t};\n\tmenu.attachTo(cell);\n\n\tcell.attachEvent(\"onBeforeMenuShow\", function () {\n\t\tvar context = menu.getContext();\n\t\tvar type = \"\";\n\t\tif (context.id)\n\t\t\ttype = view.getItem(context.id).type === \"folder\" ? \"folder\" : \"file\";\n\n\t\tmenu.filter(function(obj){\n\t\t\tvar res = true;\n\n\t\t\tif (obj.batch){\n\t\t\t\tif(!type){\n\t\t\t\t\tres = (obj.batch == \"empty\");\n\t\t\t\t} else {\n\t\t\t\t\tres = (obj.batch == type || obj.batch == \"item\" || obj.batch == \"empty\");\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(view.config.menuFilter)\n\t\t\t\tres =  res && view.config.menuFilter(obj);\n\n\t\t\treturn res;\n\t\t});\n\n\t\tif(menu.count() && context.id){\n\t\t\twebix.UIManager.setFocus(this);\n\t\t\tvar sel = this.getSelectedId();\n\t\t\tvar found = false;\n\t\t\tif(webix.isArray(sel)){\n\t\t\t\tfor(var i =0; !found && i < sel.length; i++){\n\t\t\t\t\tif(\"\"+sel[i] == \"\"+context.id)\n\t\t\t\t\t\tfound = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(!found && this.exists(context.id))\n\t\t\t\tthis.select(context.id);\n\t\t}\n\n\t\treturn menu.count()>0;\n\t});\n\n\tcell.attachEvent(\"onAfterMenuShow\", function (id) {\n\t\tif(id){\n\t\t\tvar selected = this.getSelectedId(true);\n\t\t\tvar isSelected = false;\n\t\t\tfor (var i = 0; ( i < selected.length) && !isSelected; i++) {\n\t\t\t\tif (selected[i].toString() == id.toString()) {\n\t\t\t\t\tisSelected = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!isSelected)\n\t\t\t\tthis.select(id.toString());\n\n\t\t\twebix.UIManager.setFocus(this);\n\t\t}\n\t\telse{\n\t\t\tthis.unselect();\n\t\t}\n\t});\n}\nfunction setCellHandlers(view, cell){\n\n\tcell.attachEvent(\"onAfterSelect\", (id) => {\n\t\tif(view.getItem(id))\n\t\t\tview.callEvent(\"onItemSelect\",[id]);\n\t});\n\n\t// double-click handlers\n\tcell.attachEvent(\"onItemDblClick\", function(id) {\n\t\tview._onFileDblClick(id);\n\t});\n\n\t// focus and blur styling\n\tview._addElementHotKey(\"tab\", function(cell){\n\t\tif (!cell.getSelectedId()) {\n\t\t\tvar id = cell.getFirstId();\n\t\t\tif (id){\n\t\t\t\tcell.select(id);\n\t\t\t}\n\t\t}\n\t},cell);\n\tcell.attachEvent(\"onFocus\", function(){\n\t\tview._activeView = this;\n\t\twebix.html.removeCss(this.$view, \"webix_blur\");\n\t});\n\tcell.attachEvent(\"onBlur\", function() {\n\t\tif (!view.getMenu() || !view.getMenu().isVisible())\n\t\t\twebix.html.addCss(cell.$view, \"webix_blur\");\n\t});\n\n\t// editing (rename)\n\tcell.attachEvent(\"onBeforeEditStop\", function (state, editor) {\n\t\treturn this.getTopParentView().callEvent(\"onBeforeEditStop\", [editor.id || editor.row, state, editor, this]);\n\t});\n\tcell.attachEvent(\"onAfterEditStop\", function (state, editor) {\n\t\tvar view = this.getTopParentView();\n\t\tif (view.callEvent(\"onAfterEditStop\", [editor.id || editor.row, state, editor, this])) {\n\t\t\tif(!editor.column || editor.column == \"value\")\n\t\t\t\tview.renameFile(editor.id || editor.row, state.value);\n\t\t\telse if(editor.column){\n\t\t\t\tview.getItem(editor.id || editor.row)[editor.column] = state.value;\n\t\t\t}\n\t\t}\n\t});\n\n\t// drag-n-drop\n\tcell.attachEvent(\"onBeforeDrop\", function (context, e) {\n\t\tif (view.callEvent(\"onBeforeDrop\", [context])) {\n\t\t\tif (context.from) {    //from different component\n\t\t\t\tview.moveFile(context.source, context.target);\n\t\t\t\tview.callEvent(\"onAfterDrop\",[context,e]);\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t});\n\tcell.attachEvent(\"onBeforeDrag\", function (context, e) {\n\t\treturn !view.config.readonly&&view.callEvent(\"onBeforeDrag\", [context, e]);\n\t});\n\tcell.attachEvent(\"onBeforeDragIn\", function (context, e) {\n\t\treturn !view.config.readonly&&view.callEvent(\"onBeforeDragIn\", [context, e]);\n\t});\n\n\t// enter hot key\n\tview._addElementHotKey(\"enter\", function (sview) {\n\t\tvar selected = sview.getSelectedId(true);\n\t\tfor (var i = 0; i < selected.length; i++) {\n\t\t\tview._onFileDblClick(selected[i]);\n\t\t}\n\t\twebix.UIManager.setFocus(sview);\n\t\tselected = sview.getSelectedId(true);\n\t\tif (!selected.length) {\n\t\t\tvar id0 = sview.getFirstId();\n\t\t\tif (id0)\n\t\t\t\tsview.select(id0);\n\t\t}\n\t}, cell);\n\n\n}","export function init(view){\n\tview.attachEvent(\"onComponentInit\", () => ready(view));\n\n\treturn {\n\t\tview: \"filetable\",\n\t\tcss: \"webix_fmanager_table\",\n\t\tcolumns: \"columns\",\n\t\theaderRowHeight: 34,\n\t\teditable: true,\n\t\teditaction: false,\n\t\tselect: \"multiselect\",\n\t\tdrag: true,\n\t\tnavigation: true,\n\t\tresizeColumn:true,\n\t\ttabFocus: true,\n\t\tonContext:{}\n\t};\n}\n\nfunction ready(view){\n\tif(view.$$(\"table\")){\n\t\tview.attachEvent(\"onHideSearchResults\", function(){\n\t\t\tif(view.$$(\"table\").isColumnVisible(\"location\"))\n\t\t\t\tview.$$(\"table\").hideColumn(\"location\");\n\t\t});\n\t\tview.attachEvent(\"onShowSearchResults\", function(){\n\t\t\tif(!view.$$(\"table\").isColumnVisible(\"location\"))\n\t\t\t\tview.$$(\"table\").showColumn(\"location\");\n\t\t});\n\n\t\tview.$$(\"table\").attachEvent(\"onBeforeEditStart\", function(id){\n\t\t\tif(typeof(id) != \"object\"){\n\t\t\t\tthis.edit({row:id,column: \"value\"});\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t});\n\n\t\t// sorting\n\t\tview.$$(\"table\").data.attachEvent(\"onBeforeSort\", function(by, dir, as, sort){\n\t\t\tview.sortState = {\n\t\t\t\tview:  view.$$(\"table\").config.id,\n\t\t\t\tsort: sort\n\t\t\t};\n\t\t\tif(view.$searchResults && view.$$(\"search\")){\n\t\t\t\tview.showSearchResults(view.$$(\"search\").getValue());\n\t\t\t\treturn false;\n\t\t\t}\n\t\t});\n\t\tview.data.attachEvent(\"onClearAll\", function(){\n\t\t\tview.sortState = null;\n\t\t});\n\t}\n}","export function init(view){\n\tview.attachEvent(\"onComponentInit\", () => ready(view));\n\n\treturn { view: \"button\", type:\"htmlbutton\", css: \"webix_fmanager_toggle\",\n\t\tlabel: \"<div class=\\\"webix_fmanager_bar_icon \\\"></div>\", width: 30,\n\t\ttooltip: webix.i18n.filemanager.hideTree\n\t};\n}\n\nfunction ready(view){\n\tif(view.$$(\"hideTree\")){\n\t\tview.$$(\"hideTree\").attachEvent(\"onItemClick\", function(){\n\t\t\tview.hideTree();\n\t\t});\n\t}\n}","export function init(view){\n\tview.attachEvent(\"onComponentInit\", () => ready(view));\n\n\treturn {\n\t\twidth: 251,\n\t\tview: \"filetree\",\n\t\tid: \"tree\",\n\t\tselect: true,\n\t\tfilterMode:{\n\t\t\tshowSubItems:false,\n\t\t\topenParents:false\n\t\t},\n\t\ttype: \"FileTree\",\n\t\tnavigation: true,\n\t\teditor:\"text\",\n\t\teditable: true,\n\t\teditaction: false,\n\t\tdrag: true,\n\t\ttabFocus: true,\n\t\tonContext:{}\n\t};\n}\n\nfunction ready(view){\n\tvar tree = view.$$(\"tree\");\n\tvar state;\n\n\tif(tree){\n\n\n\t\ttree.type.icons = view.config.icons;\n\n\t\t// data source definition (syncing with main data source)\n\t\ttree.sync(view,function(){\n\t\t\tthis.filter(function(obj){\n\n\t\t\t\treturn (obj.$count||obj.type==\"folder\");\n\t\t\t});\n\t\t});\n\n\t\ttree.on_click.webix_tree_child_branch = function(ev, id){\n\t\t\tvar url = view.config.handlers.branch;\n\t\t\tif(url){\n\t\t\t\tview.loadDynData(url, this.getItem(id), \"branch\", true);\n\t\t\t}\n\t\t};\n\n\t\tview.attachEvent(\"onBeforeDynParse\", function(){\n\t\t\tstate = tree.getState();\n\t\t});\n\n\t\tview.attachEvent(\"onAfterDynParse\", function(obj,data,mode){\n\t\t\tif(state){\n\t\t\t\ttree.setState(state);\n\t\t\t\tstate = null;\n\t\t\t}\n\t\t\tif(mode == \"branch\" && obj.open){\n\t\t\t\ttree.open(obj.id);\n\t\t\t}\n\t\t});\n\n\t\ttree.attachEvent(\"onAfterSelect\", function(id){\n\t\t\tview.callEvent(\"onFolderSelect\",[id]);\n\t\t});\n\n\t\tview.attachEvent(\"onAfterCursorChange\", function(id){\n\t\t\tif (id){\n\t\t\t\ttree.select(id);\n\t\t\t\ttree.showItem(id);\n\t\t\t}\n\t\t});\n\n\t\t// hide search results on click\n\t\ttree.attachEvent(\"onItemClick\",function(){\n\t\t\tif(view.$searchResults){\n\t\t\t\tview.hideSearchResults();\n\t\t\t}\n\t\t});\n\n\t\tview.attachEvent(\"onItemRename\", function(id){\n\t\t\ttree.refresh(id);\n\t\t});\n\n\t\t// open/close on double-click\n\t\ttree.attachEvent(\"onItemDblClick\",function(id){\n\t\t\tif(this.isBranchOpen(id)){\n\t\t\t\tthis.close(id);\n\t\t\t}\n\t\t\telse{\n\t\t\t\tthis.open(id);\n\t\t\t}\n\t\t});\n\n\t\ttree.attachEvent(\"onBlur\",function(){\n\t\t\tif(!view.getMenu()||!view.getMenu().isVisible()){\n\t\t\t\twebix.html.addCss(this.$view,\"webix_blur\");\n\t\t\t}\n\t\t});\n\n\t\ttree.attachEvent(\"onFocus\",function(){\n\t\t\tview._activeView = tree;\n\t\t\twebix.html.removeCss(tree.$view,\"webix_blur\");\n\t\t\t// clear sub view selection\n\t\t\tview.$$(view.config.mode).unselect();\n\t\t});\n\n\n\t\t// setting path (history support)\n\t\tview.attachEvent(\"onPathComplete\",function(id){\n\t\t\ttree.showItem(id);\n\t\t});\n\n\t\t// context menu\n\t\tif(!view.config.readonly){\n\t\t\tif(view.getMenu())\n\t\t\t\tview.getMenu().attachTo(tree);\n\t\t\ttree.attachEvent(\"onBeforeMenuShow\",function(id){\n\t\t\t\tvar menu = view.getMenu();\n\n\t\t\t\tvar context = menu.getContext();\n\t\t\t\tvar type = \"\";\n\t\t\t\tif (context.id)\n\t\t\t\t\ttype = this.getParentId(context.id) ? \"folder\" : \"root\";\n\n\t\t\t\tmenu.filter(function(obj){\n\t\t\t\t\tvar res = true;\n\n\t\t\t\t\tif (obj.batch){\n\t\t\t\t\t\tif(!type){\n\t\t\t\t\t\t\tres = (obj.batch == \"empty\");\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tres = obj.batch == type;\n\t\t\t\t\t\t\tif(type != \"root\")\n\t\t\t\t\t\t\t\tres = res || obj.batch == \"item\" || obj.batch == \"empty\";\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif(view.config.menuFilter)\n\t\t\t\t\t\tres =  res && view.config.menuFilter(obj);\n\n\t\t\t\t\treturn res;\n\t\t\t\t});\n\t\t\t\tthis.select(id);\n\t\t\t\twebix.UIManager.setFocus(this);\n\t\t\t\treturn menu.count()>0;\n\t\t\t});\n\t\t}\n\n\t\t// editing (rename)\n\t\ttree.attachEvent(\"onBeforeEditStop\",function(state,editor){\n\t\t\treturn view.callEvent(\"onBeforeEditStop\",[editor.id,state,editor,tree]);\n\t\t});\n\t\ttree.attachEvent(\"onAfterEditStop\",function(state,editor){\n\t\t\tif(view.callEvent(\"onAfterEditStop\",[editor.id,state,editor,tree])){\n\t\t\t\tview.renameFile(editor.id,state.value);\n\t\t\t}\n\t\t});\n\n\t\t// drag-n-drop\n\t\ttree.attachEvent(\"onBeforeDrag\",function(context,e){\n\t\t\treturn !view.config.readonly&&view.callEvent(\"onBeforeDrag\",[context,e]);\n\t\t});\n\t\ttree.attachEvent(\"onBeforeDragIn\",function(context,e){\n\t\t\treturn !view.config.readonly&&view.callEvent(\"onBeforeDragIn\",[context,e]);\n\t\t});\n\t\ttree.attachEvent(\"onBeforeDrop\",function(context,e){\n\t\t\tif(view.callEvent(\"onBeforeDrop\",[context,e])){\n\t\t\t\tif (context.from){\t//from different component\n\t\t\t\t\tview.moveFile(context.source, context.target);\n\t\t\t\t\tview.callEvent(\"onAfterDrop\",[context,e]);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t});\n\n\t\t// focus\n\t\tvar setTreeCursor = function(){\n\t\t\tif(tree)\n\t\t\t\twebix.UIManager.setFocus(tree);\n\t\t};\n\t\tview.attachEvent(\"onAfterBack\",setTreeCursor);\n\t\tview.attachEvent(\"onAfterForward\",setTreeCursor);\n\t\tview.attachEvent(\"onAfterLevelUp\",setTreeCursor);\n\t\tview.attachEvent(\"onAfterPathClick\",setTreeCursor);\n\n\t\t// read-only mode\n\t\tif(view.config.readonly){\n\t\t\ttree.define(\"drag\",false);\n\t\t\ttree.define(\"editable\",false);\n\t\t}\n\t}\n}","import * as back from \"./views/back\";\nimport * as bodyLayout from \"./views/bodylayout\";\nimport * as collapse from \"./views/collapseall\";\nimport * as columns from \"./views/columns\";\nimport * as expand from \"./views/expandall\";\nimport * as files from \"./views/files\";\nimport * as forward from \"./views/forward\";\nimport * as mainLayout from \"./views/mainlayout\";\nimport * as menu from \"./views/menu\";\nimport * as modes from \"./views/modes\";\nimport * as modeViews from \"./views/modeviews\";\nimport * as path from \"./views/path\";\nimport * as search from \"./views/search\";\nimport * as sidePanel from \"./views/panel\";\nimport * as table from \"./views/table\";\nimport * as treeLayout from \"./views/treelayout\";\nimport * as treeToolbar from \"./views/treetoolbar\";\nimport * as toggle from \"./views/toggle\";\nimport * as toolbar from \"./views/toolbar\";\nimport * as tree from \"./views/tree\";\nimport * as up from \"./views/up\";\n\nexport function init(view, config){\n\tview.structure = {\n\t\t\"mainLayout\": mainLayout.init(view),\n\t\t\"toolbar\": toolbar.init(view),\n\t\t\"menu\": menu.init(view),\n\t\t\"back\": back.init(view),\n\t\t\"forward\": forward.init(view),\n\t\t\"up\": up.init(view),\n\t\t\"path\": path.init(view),\n\t\t\"search\": search.init(view),\n\t\t\"bodyLayout\": bodyLayout.init(view),\n\t\t\"treeLayout\": treeLayout.init(view),\n\t\t\"sidePanel\": sidePanel.init(view),\n\t\t\"treeToolbar\": treeToolbar.init(view),\n\t\t\"showTree\": toggle.init(view),\n\t\t\"hideTree\": toggle.init(view),\n\t\t\"expandAll\": expand.init(view),\n\t\t\"collapseAll\": collapse.init(view),\n\t\t\"tree\": tree.init(view),\n\t\t\"modeViews\":{\n\t\t\tconfig: function(settings){\n\t\t\t\treturn modeViews.init(view,settings);\n\t\t\t}\n\t\t},\n\t\t\"modes\":{\n\t\t\tconfig:function(settings){\n\t\t\t\treturn modes.init(view,settings);\n\t\t\t}\n\t\t},\n\t\t\"files\": {\n\t\t\tconfig: files.init(view)\n\t\t},\n\n\t\t\"table\": {\n\t\t\tconfig: table.init(view)\n\t\t},\n\t\t\"columns\": {\n\t\t\tconfig: columns.init(view)\n\t\t}\n\t};\n\n\tchangeStructure(view, config);\n}\n\n\nexport function getViews(view, struct, config){\n\tvar cells, found, i, id,\n\t\tarrName = \"\",\n\t\tarrs = [\"rows\",\"cols\",\"elements\",\"cells\",\"columns\",\"options\",\"data\"];\n\n\tfor(i =0; i< arrs.length;i++){\n\t\tif(struct[arrs[i]]){\n\t\t\tarrName = arrs[i];\n\t\t\tcells = struct[arrName];\n\t\t}\n\t}\n\tif(cells){\n\t\tif(typeof(cells) == \"string\"){\n\t\t\tif(view.structure[cells]){\n\t\t\t\tstruct[arrName] = getCellConfig(view, view.structure[cells],config);\n\t\t\t\tcells = struct[arrName];\n\t\t\t}\n\t\t}\n\n\t\tfor(i=0; i< cells.length;i++){\n\t\t\tfound = null;\n\t\t\tif(typeof(cells[i]) == \"string\"){\n\t\t\t\tfound = id = cells[i];\n\t\t\t\tif(view.structure[id]){\n\t\t\t\t\tcells[i] = getCellConfig(view, webix.extend({},view.structure[id]),config);\n\t\t\t\t\tcells[i].id = id;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\tcells[i] = { };\n\t\t\t}\n\t\t\tgetViews(view, cells[i], config);\n\t\t\tif (found){\n\t\t\t\tif(config.on && config.on.onViewInit){\n\t\t\t\t\tconfig.on.onViewInit.apply(this,[found,cells[i]]);\n\t\t\t\t}\n\t\t\t\twebix.callEvent(\"onViewInit\",[found,cells[i],this]);\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport function getCellConfig(view, defConfig, config){\n\tvar cellConfig = defConfig.config||defConfig;\n\treturn (typeof(cellConfig)==\"function\"?cellConfig.call(view,config):webix.copy(cellConfig));\n}\n\nfunction isSVG(){\n\treturn (typeof SVGRect != \"undefined\");\n}\n\nexport function getUI(view, config){\n\tvar layoutConf = view.structure.mainLayout;\n\tvar structure = webix.extend({},layoutConf.config || layoutConf);\n\tgetViews(view, structure, config);\n\n\tif(config.on && config.on.onViewInit){\n\t\tconfig.on.onViewInit.apply(view,[config.id||\"mainLayout\",structure]);\n\t}\n\twebix.callEvent(\"onViewInit\",[config.id||\"mainLayout\",structure,view]);\n\tif(!isSVG())\n\t\tconfig.css = config.css?config.css+\" webix_nosvg\":\"webix_nosvg\";\n\treturn structure;\n}\n\nfunction changeStructure(view, config){\n\tvar newView, vName,\n\t\tnewViews = config.structure;\n\n\tif(newViews){\n\t\tfor(vName in newViews){\n\t\t\tif(newViews.hasOwnProperty(vName)){\n\t\t\t\tnewView = webix.copy(newViews[vName]);\n\t\t\t\tif(view.structure[vName] && view.structure[vName].config){\n\t\t\t\t\tview.structure[vName].config = newView.config||newView;\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tview.structure[vName] = newView.config||newView;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}","export function init(){\n\tvar config = {\n\t\ttype: \"clean\",\n\t\trows:[\n\t\t\t\"toolbar\",\n\t\t\t\"bodyLayout\"\n\t\t]\n\t};\n\tif(typeof SVGRect == \"undefined\")\n\t\tconfig.css = \"webix_nosvg\";\n\treturn config;\n}","export function init(){\n\treturn {\n\t\tcss: \"webix_fmanager_toolbar\",\n\t\tpaddingX: 10,\n\t\tpaddingY:5,\n\t\tmargin: 7,\n\t\tcols:[\n\t\t\t\"menu\",\n\t\t\t{id: \"menuSpacer\", width: 75},\n\t\t\t{margin:0, cols:[\"back\",\"forward\"]},\"up\",\n\t\t\t\"path\",\"search\",\"modes\"\n\t\t]\n\t};\n}","export function init(view){\n\tview.attachEvent(\"onComponentInit\", () => ready(view));\n\treturn { view: \"button\", type:\"htmlbutton\", label: \"<div class=\\\"webix_fmanager_bar_icon \\\"></div>\",\n\t\tcss: \"webix_fmanager_menu\", icon: \"bars\", width: 37,\n\t\ttooltip: webix.i18n.filemanager.actions\n\t};\n}\n\nfunction ready(view){\n\tvar btn = view.$$(\"menu\");\n\tif(btn){\n\t\tbtn.attachEvent(\"onItemClick\",  function(){\n\t\t\tif(view.callEvent(\"onBeforeMenu\", [])){\n\t\t\t\tview.getMenu().setContext({obj: view.getActiveView(), id: view.getActive()});\n\t\t\t\tview.getMenu().show(btn.$view);\n\t\t\t\tview.callEvent(\"onAfterMenu\", []);\n\t\t\t}\n\t\t});\n\n\t\tif(view.config.readonly){\n\t\t\tbtn.hide();\n\t\t\tif(view.$$(\"menuSpacer\"))\n\t\t\t\tview.$$(\"menuSpacer\").hide();\n\t\t}\n\t}\n}\n","export function init(view){\n\tview.attachEvent(\"onComponentInit\", () => ready(view));\n\n\treturn { view: \"button\", type:\"htmlbutton\", css: \"webix_fmanager_back\",\n\t\tlabel: \"<div class=\\\"webix_fmanager_bar_icon \\\"></div>\", width: 37,\n\t\ttooltip: webix.i18n.filemanager.back\n\t};\n}\n\nfunction ready(view){\n\tif(view.$$(\"back\")){\n\t\tview.$$(\"back\").attachEvent(\"onItemClick\", function(){\n\t\t\tif(view.callEvent(\"onBeforeBack\", [])){\n\t\t\t\tview.goBack();\n\t\t\t\tview.callEvent(\"onAfterBack\", []);\n\t\t\t}\n\t\t});\n\t\tview.attachEvent(\"onHistoryChange\", function(path, ids, cursor){\n\t\t\tif(!cursor)\n\t\t\t\tview.$$(\"back\").disable();\n\t\t\telse\n\t\t\t\tview.$$(\"back\").enable();\n\t\t});\n\t}\n}","export function init(view){\n\tview.attachEvent(\"onComponentInit\", () => ready(view));\n\n\treturn { view: \"button\", type:\"htmlbutton\", css: \"webix_fmanager_forward\",\n\t\tlabel: \"<div class=\\\"webix_fmanager_bar_icon \\\"></div>\", width: 37,\n\t\ttooltip: webix.i18n.filemanager.forward\n\t};\n}\n\nfunction ready(view){\n\tif(view.$$(\"forward\")){\n\t\tview.$$(\"forward\").attachEvent(\"onItemClick\", function(){\n\t\t\tif(view.callEvent(\"onBeforeForward\", [])){\n\t\t\t\tview.goForward();\n\t\t\t\tview.callEvent(\"onAfterForward\", []);\n\t\t\t}\n\t\t});\n\t\tview.attachEvent(\"onHistoryChange\", function(path, ids, cursor){\n\t\t\tif(ids.length ==1 || cursor == ids.length-1)\n\t\t\t\tview.$$(\"forward\").disable();\n\t\t\telse\n\t\t\t\tview.$$(\"forward\").enable();\n\t\t});\n\t}\n}","export function init(view){\n\tview.attachEvent(\"onComponentInit\", () => ready(view));\n\treturn { view: \"button\", type:\"htmlbutton\", css: \"webix_fmanager_up\",\n\t\tlabel: \"<div class=\\\"webix_fmanager_bar_icon \\\"></div>\", width: 37,\n\t\ttooltip: webix.i18n.filemanager.levelUp\n\t};\n}\n\nfunction ready(view){\n\tif(view.$$(\"up\")){\n\t\tview.$$(\"up\").attachEvent(\"onItemClick\", function(){\n\t\t\tif(view.callEvent(\"onBeforeLevelUp\", [])){\n\t\t\t\tview.levelUp();\n\t\t\t\tview.callEvent(\"onAfterLevelUp\", []);\n\t\t\t}\n\t\t});\n\t}\n}","export function init(view){\n\tview.attachEvent(\"onComponentInit\", () => ready(view));\n\n\treturn { view: \"path\", borderless: true};\n}\n\nfunction ready(view){\n\tif(view.$$(\"path\")){\n\t\tview.attachEvent(\"onFolderSelect\",function(id){\n\t\t\tview.$$(\"path\").setValue(view.getPathNames(id));\n\t\t});\n\t\tview.$$(\"path\").attachEvent(\"onItemClick\",function(id){\n\t\t\tvar targetIndex = view.$$(\"path\").getIndexById(id);\n\t\t\tvar levelUp = view.$$(\"path\").count()-targetIndex-1;\n\n\t\t\tif(view.$searchResults)\n\t\t\t\tview.hideSearchResults();\n\n\t\t\tif(levelUp){\n\t\t\t\tid = view.getCursor();\n\t\t\t\twhile(levelUp){\n\t\t\t\t\tid = view.getParentId(id);\n\t\t\t\t\tlevelUp--;\n\t\t\t\t}\n\t\t\t\tview.setCursor(id);\n\t\t\t}\n\t\t\tview.callEvent(\"onAfterPathClick\",[id]);\n\t\t});\n\n\t\tview.data.attachEvent(\"onClearAll\",function(){\n\t\t\tview.$$(\"path\").clearAll();\n\t\t});\n\t}\n}","export function init(view){\n\tview.attachEvent(\"onComponentInit\", () => ready(view));\n\n\treturn { view: \"search\", gravity: 0.3, minWidth: 80, css: \"webix_fmanager_search\", icon:\" webix_fmanager_icon\" };\n}\n\nfunction ready(view){\n\tvar search = view.$$(\"search\");\n\tif(search){\n\t\tview.attachEvent(\"onHideSearchResults\", function(){\n\t\t\tsearch.setValue(\"\");\n\t\t});\n\t\tview.attachEvent(\"onBeforeCursorChange\", function(){\n\t\t\tif(view.$searchResults){\n\t\t\t\tview.hideSearchResults(true);\n\t\t\t}\n\t\t});\n\t\tsearch.attachEvent(\"onTimedKeyPress\",  function(){\n\t\t\tif(this._code != 9){\n\t\t\t\tvar value = search.getValue();\n\t\t\t\tif(value){\n\t\t\t\t\tif(view.callEvent(\"onBeforeSearch\", [value])){\n\t\t\t\t\t\tview.showSearchResults(value);\n\t\t\t\t\t\tview.callEvent(\"onAfterSearch\", [value]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if(view.$searchResults){\n\t\t\t\t\tview.hideSearchResults();\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t});\n\t\tsearch.attachEvent(\"onKeyPress\",  function(code){\n\t\t\tthis._code = code;\n\t\t});\n\n\t\tview.attachEvent(\"onAfterModeChange\",function(){\n\t\t\tif(view.$searchResults)\n\t\t\t\tview.showSearchResults(search.getValue());\n\t\t});\n\t}\n}","export function init(){\n\treturn {\n\t\tcss: \"webix_fmanager_body\",\n\t\tcols:[\n\t\t\t\"sidePanel\",\n\t\t\t\"treeLayout\",\n\t\t\t{view:\"resizer\", id: \"resizer\", width:3},\n\t\t\t\"modeViews\"\n\t\t]\n\t};\n}","export function init(){\n\treturn {\n\t\trows:[\n\t\t\t\"treeToolbar\",\n\t\t\t\"tree\"\n\t\t]\n\t};\n}","export function init(view){\n\tview.attachEvent(\"onComponentInit\", () => ready(view));\n\treturn {\n\t\thidden:true,\n\t\tcss:\"webix_fmanager_panel\",\n\t\ttype: \"clean\",\n\t\trows:[\n\t\t\t{\n\t\t\t\theight: 34,\n\t\t\t\tpaddingY:1,\n\t\t\t\tpaddingX:0,\n\t\t\t\tview: \"form\",\n\t\t\t\tcols:[\n\t\t\t\t\t{ view: \"button\", id: \"showTree\", type:\"htmlbutton\", css: \"webix_fmanager_toggle\",\n\t\t\t\t\t\tlabel: \"<div class=\\\"webix_fmanager_bar_icon \\\"></div>\", width: 30,\n\t\t\t\t\t\ttooltip: webix.i18n.filemanager.showTree\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t},\n\t\t\t{ template:\" \"}\n\t\t]\n\t};\n}\nfunction ready(view){\n\tif(view.$$(\"showTree\")){\n\t\tview.$$(\"showTree\").attachEvent(\"onItemClick\", function(){\n\t\t\tview.showTree();\n\t\t});\n\t}\n}\n","export function init(){\n\treturn {\n\t\tcss: \"webix_fmanager_tree_toolbar\",\n\t\theight: 34,\n\t\tpaddingX: 8,\n\t\tpaddingY:1,\n\t\tmargin: 7,\n\t\tcols:[\n\t\t\t\"hideTree\",\n\t\t\t{id: \"treeSpacer\"},\n\t\t\t\"expandAll\",\"collapseAll\"\n\t\t]\n\t};\n}","export function init(view){\n\tview.attachEvent(\"onComponentInit\", () => ready(view));\n\n\treturn { view: \"button\", type:\"htmlbutton\", css: \"webix_fmanager_expand\",\n\t\tlabel: \"<div class=\\\"webix_fmanager_bar_icon \\\"></div>\", width: 30,\n\t\ttooltip: webix.i18n.filemanager.expandTree\n\t};\n}\n\nfunction ready(view){\n\tif(view._getDynMode() && view.$$(\"expandAll\")){\n\t\tview.$$(\"expandAll\").hide();\n\t}\n\tif(view.$$(\"expandAll\") && view.$$(\"tree\")){\n\t\tview.$$(\"expandAll\").attachEvent(\"onItemClick\", function(){\n\t\t\tview.$$(\"tree\").openAll();\n\t\t});\n\t}\n}","export function init(view){\n\tview.attachEvent(\"onComponentInit\", () => ready(view));\n\n\treturn { view: \"button\", type:\"htmlbutton\", css: \"webix_fmanager_collapse\",\n\t\tlabel: \"<div class=\\\"webix_fmanager_bar_icon \\\"></div>\", width: 30, tooltip: webix.i18n.filemanager.collapseTree\n\t};\n}\n\nfunction ready(view){\n\tif(view._getDynMode() && view.$$(\"collapseAll\")){\n\t\tview.$$(\"collapseAll\").hide();\n\t}\n\tif(view.$$(\"collapseAll\") && view.$$(\"tree\")){\n\t\tview.$$(\"collapseAll\").attachEvent(\"onItemClick\", function(){\n\t\t\tview.$$(\"tree\").closeAll();\n\t\t});\n\t}\n}","export function init(){\n\treturn {\n\t\tview: \"fileview\",\n\t\ttype: \"FileView\",\n\t\tselect: \"multiselect\",\n\t\teditable:true,\n\t\teditaction: false,\n\t\teditor:\"text\",\n\t\teditValue:\"value\",\n\t\tdrag: true,\n\t\tnavigation: true,\n\t\ttabFocus: true,\n\t\tonContext:{}\n\t};\n}\n\n","export function init(view){\n\tvar locale =  webix.i18n.filemanager;\n\treturn [\n\t\t{ id:\"value\",\theader: locale.name, fillspace:3, sort: \"string\", template: function(obj,common){\n\t\t\tvar name = common.templateName(obj,common);\n\t\t\treturn common.templateIcon(obj,common)+name;\n\t\t}, editor: \"text\"},\n\t\t{ id:\"date\",\theader: locale.date, fillspace:2, sort: \"int\", template: function(obj,common){\n\t\t\treturn common.templateDate(obj,common);\n\t\t}},\n\t\t{ id:\"type\",\theader: locale.type, fillspace:1, sort: \"string\", template: function(obj,common){\n\t\t\treturn common.templateType(obj);\n\t\t}},\n\t\t{ id:\"size\",\theader: locale.size, fillspace:1, sort: \"int\", css:{\"text-align\":\"right\"}, template: function(obj,common){\n\t\t\treturn obj.type==\"folder\"?\"\":common.templateSize(obj);\n\t\t}},\n\t\t{ id:\"location\",\theader: locale.location, fillspace:2, sort: \"string\", template: function(obj){\n\t\t\treturn view._getLocation(obj);\n\t\t},hidden:true}\n\t];\n}","import * as save from \"../save.js\";\n\nfunction getConfig(legacy){\n\tvar config = {};\n\tif (legacy){\n\t\tconfig = {\n\t\t\tview: \"uploader\",\n\t\t\tcss: \"webix_upload_select_ie\",\n\t\t\ttype: \"iconButton\",\n\t\t\ticon:\"check\",\n\t\t\tlabel: webix.i18n.filemanager.select,\n\t\t\tformData:{ action:\"upload\" },\n\t\t\turlData:{}\n\t\t};\n\t}\n\telse{\n\t\tconfig = {\n\t\t\tview:\"uploader\",\n\t\t\tapiOnly:true,\n\t\t\tformData:{ action:\"upload\" },\n\t\t\turlData:{}\n\t\t};\n\t}\n\treturn config;\n}\n\nexport function init(view){\n\tvar legacy = view.config.legacyUploader;\n\tvar config = getConfig(legacy);\n\n\tif(config){\n\t\tif (legacy){\n\t\t\tcreateFlashUploader(view, webix.copy(config));\n\t\t}\n\t\telse{\n\t\t\tview._uploader = webix.ui(config);\n\t\t\tview.attachEvent(\"onDestruct\", function(){\n\t\t\t\tview._uploader.destructor();\n\t\t\t});\n\t\t}\n\t}\n\tsetUploadHandlers(view);\n}\n\n\n\nfunction setUploadHandlers(view){\n\tvar uploader = getUploader(view);\n\tif(uploader){\n\t\t// define url\n\t\tuploader.config.upload = view.config.handlers.upload;\n\t\t// add drop areas\n\t\tvar modes = view.config.modes;\n\t\tif(modes && !view.config.readonly){\n\t\t\tfor(var i =0; i < modes.length; i++){\n\t\t\t\tif(view.$$(modes[i]))\n\t\t\t\t\tuploader.addDropZone(view.$$(modes[i]).$view);\n\t\t\t}\n\t\t}\n\n\t\t// handlers\n\t\tuploader.attachEvent(\"onBeforeFileAdd\",function(file){\n\t\t\tvar target = \"\"+getUploadFolder(view);\n\n\t\t\tuploader.config.formData.target = target;\n\t\t\tuploader.config.urlData.target = target;\n\t\t\t//reset upload script each time, so we can be sure that active config is used\n\t\t\tuploader.config.upload = view.config.handlers.upload;\n\n\t\t\treturn view.callEvent(\"onBeforeFileUpload\",[file]);\n\t\t});\n\t\tuploader.attachEvent(\"onAfterFileAdd\", function(file){\n\t\t\tview._uploaderFolder = null;\n\t\t\tfile.oldId = file.id;\n\t\t\tview.add({\n\t\t\t\t\"id\"   : file.id,\n\t\t\t\t\"value\": file.name,\n\t\t\t\t\"type\" : file.type,\n\t\t\t\tsize   : file.size,\n\t\t\t\tdate   : Math.round((new Date()).valueOf()/1000)\n\t\t\t}, -1, uploader.config.formData.target);\n\n\t\t\tif(view.config.uploadProgress){\n\t\t\t\tview.showProgress(view.config.uploadProgress);\n\t\t\t}\n\t\t\tview._refreshActiveFolder();\n\t\t});\n\n\t\tuploader.attachEvent(\"onUploadComplete\",function(file){\n\t\t\tif(view._uploadPopup){\n\t\t\t\tview.getMenu().hide();\n\t\t\t\tview._uploadPopup.hide();\n\t\t\t}\n\t\t\tview.hideProgress();\n\t\t\tview.callEvent(\"onAfterFileUpload\",[file]);\n\t\t});\n\t\tuploader.attachEvent(\"onFileUpload\",function(item){\n\t\t\tif(item.oldId)\n\t\t\t\tview.data.changeId(item.oldId,item.id);\n\t\t\tif(item.value)\n\t\t\t\tview.getItem(item.id).value = item.value;\n\n\t\t\tview.getItem(item.id).type = item.type;\n\t\t\tview._refreshActiveFolder();\n\t\t});\n\t\tuploader.attachEvent(\"onFileUploadError\",function(item, response){\n\t\t\tsave.errorHandler(view, response);\n\t\t\tview.hideProgress();\n\n\t\t});\n\t}\n}\n\nfunction createFlashUploader(view, config){\n\tif(!config){\n\t\tconfig = getConfig(view.config.legacyUploader);\n\t}\n\tview._uploadPopup = webix.ui({\n\t\tview:\"popup\",\n\t\tpadding:0,\n\t\twidth:250,\n\t\tbody: config\n\t});\n\tview._uploader = view._uploadPopup.getBody();\n\tview.attachEvent(\"onDestruct\", function(){\n\t\tview._uploadPopup.destructor();\n\t});\n}\n\nfunction getUploadFolder(view){\n\treturn \tview._uploaderFolder||view.getCursor();\n}\n\nexport function getUploader(view){\n\treturn \tview._uploader;\n}\n\nexport function uploadFile(view,id,e){\n\n\tif(!view.data.branch[id] && view.getItem(id).type != \"folder\"){\n\t\tid = view.getParentId(id);\n\t}\n\n\tview._uploaderFolder = id;\n\tif(view._uploadPopup){\n\t\tview._uploadPopup.destructor();\n\t\tcreateFlashUploader(view);\n\t\tsetUploadHandlers(view);\n\t\tview._uploadPopup.show(e,{x:20,y:5});\n\t}\n\telse{\n\t\tif(view._uploader)\n\t\t\tview._uploader.fileDialog();\n\t}\n}","import \"./types\";\nimport \"./locale\";\nimport \"./widgets\";\n\nimport * as context from \"./views/actions\";\nimport * as defaults from \"./defaults\";\nimport * as history from \"./history\";\nimport * as loader from \"./load\";\nimport * as path from \"./path\";\nimport * as save from \"./save\";\nimport * as tree from \"./tree\";\nimport * as ui from \"./ui\";\nimport * as uploader from \"./views/upload\";\n\n\nwebix.protoUI({\n\tname:\"filemanager\",\n\t$init: function(config) {\n\t\tthis.$view.className += \" webix_fmanager\";\n\t\twebix.extend(this.data, webix.TreeStore, true);\n\t\tthis.data.provideApi(this,true);\n\t\twebix.extend(config,this.defaults);\n\n\t\tconfig.mode = config.mode || config.modes[0];\n\n\t\tui.init(this,config);\n\t\thistory.init(this);\n\t\tloader.init(this);\n\n\t\tconfig.legacyUploader = config.legacyUploader || webix.isUndefined(XMLHttpRequest) || webix.isUndefined((new XMLHttpRequest()).upload);\n\n\t\tthis.$ready.push(()=>{\n\t\t\tthis._beforeInit();\n\t\t\tthis.callEvent(\"onComponentInit\",[]);\n\t\t});\n\t\twebix.UIManager.tabControl = true;\n\t\twebix.extend(config, ui.getUI(this,config));\n\n\t\tthis.attachEvent(\"onAfterLoad\",function(){\n\t\t\t// default cursor\n\t\t\tif(!this.getCursor || !this.getCursor()){\n\t\t\t\tvar selection =  this.config.defaultSelection;\n\t\t\t\tselection = selection?selection.call(this):this.getFirstChildId(0);\n\t\t\t\tif(this.setCursor)\n\t\t\t\t\tthis.setCursor(selection);\n\t\t\t\telse //data:[], binding is not yet applied\n\t\t\t\t\tthis.attachEvent(\"onComponentInit\", ()=>{\n\t\t\t\t\t\tthis.setCursor(selection);\n\t\t\t\t\t});\n\t\t\t}\n\t\t});\n\t},\n\thandlers_setter: function(handlers){\n\t\tif(typeof handlers == \"string\")\n\t\t\thandlers = this.setDefaultHandlers(handlers);\n\t\tfor(var h in handlers){\n\t\t\tvar url = handlers[h];\n\t\t\tif (typeof url == \"string\"){\n\t\t\t\tif(url.indexOf(\"->\") != -1){\n\t\t\t\t\tvar parts = url.split(\"->\");\n\t\t\t\t\turl = webix.proxy(parts[0], parts[1]);\n\t\t\t\t}\n\t\t\t\telse if(h != \"upload\" && h != \"download\")\n\t\t\t\t\turl = webix.proxy(\"post\", url);\n\t\t\t}\n\t\t\thandlers[h] = url;\n\t\t}\n\t\treturn handlers;\n\t},\n\tsetDefaultHandlers: function(url){\n\t\treturn {\n\t\t\tupload: url,\n\t\t\tdownload: url,\n\t\t\tcopy: url,\n\t\t\tmove: url,\n\t\t\tremove: url,\n\t\t\trename: url,\n\t\t\tcreate: url\n\t\t};\n\t},\n\t_beforeInit: function(){\n\t\tcontext.init(this);\n\t\tuploader.init(this);\n\n\t\tthis.attachEvent(\"onFolderSelect\", function(id){\n\t\t\tthis.setCursor(id);\n\t\t});\n\n\t\tthis.attachEvent(\"onBeforeDragIn\",function(context){\n\t\t\tvar target = context.target;\n\t\t\tif(target){\n\t\t\t\tvar ids = context.source;\n\t\t\t\tfor(var i=0; i < ids.length; i++){\n\t\t\t\t\twhile(target){\n\t\t\t\t\t\tif(target==ids[i]){\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttarget = this._getParentId(target);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t});\n\n\t},\n\t_getParentId: function(id){\n\t\tif(!this.getItem(id)){\n\t\t\tvar activeView = this.$$(this.config.mode);\n\t\t\tvar item = activeView.getItem(id);\n\t\t\tif(item && item.parent && this.getItem(item.parent)){\n\t\t\t\treturn item.parent;\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\t\treturn webix.TreeStore.getParentId.apply(this,arguments);\n\t},\n\tgetMenu: function(){\n\t\treturn this._contextMenu;\n\t},\n\tgetPath: function(id){\n\t\treturn path.getPath(this,id);\n\t},\n\tgetPathNames: function(id){\n\t\treturn path.getPathNames(this,id);\n\t},\n\tsetPath: function(id){\n\t\treturn path.setPath(this,id);\n\t},\n\t_getLocation: function(obj){\n\t\tvar location = \"\", path;\n\t\tif(this.getItem(obj.id) || obj.parent && this.getItem(obj.parent)){\n\t\t\tif(obj.parent){\n\t\t\t\tpath = this.getPathNames(obj.parent);\n\t\t\t\tpath.shift();\n\t\t\t}\n\t\t\telse{\n\t\t\t\tpath = this.getPathNames(obj.id);\n\t\t\t\tpath.shift();\n\t\t\t\tpath.pop();\n\t\t\t}\n\t\t\tvar names = [];\n\t\t\tfor(var i=0; i < path.length;i++){\n\t\t\t\tnames.push(path[i].value);\n\t\t\t}\n\t\t\tlocation = \"/\"+names.join(\"/\");\n\t\t}\n\t\telse if(obj.location){\n\t\t\tlocation = obj.location;\n\t\t}\n\t\telse if(typeof obj.id == \"string\"){\n\t\t\tvar parts = obj.id.split(\"/\");\n\t\t\tparts.pop();\n\t\t\tlocation = \"/\"+parts.join(\"/\");\n\t\t}\n\t\treturn location;\n\t},\n\tgetSearchData: function(id,value){\n\t\tvar found = [];\n\t\tthis.data.each(function(obj){\n\t\t\tvar text = this.config.templateName(obj);\n\t\t\tif(text.toLowerCase().indexOf(value.toLowerCase())>=0){\n\t\t\t\tfound.push(webix.copy(obj));\n\t\t\t}\n\t\t},this,true,id);\n\t\treturn found;\n\t},\n\tshowSearchResults: function(value){\n\t\tvar id = this.getCursor();\n\t\tif(this.config.handlers.search){\n\t\t\tloader.loadSearchData(this,this.config.handlers.search, id, value);\n\t\t}\n\t\telse{\n\t\t\tvar data = \tthis.getSearchData(id, value);\n\t\t\tloader.parseSearchData(this,data);\n\t\t}\n\t},\n\thideSearchResults: function(skipRefresh){\n\t\tif(this.$searchResults){\n\t\t\tthis.callEvent(\"onHideSearchResults\",[]);\n\t\t\tthis.$searchResults = false;\n\t\t\t// refresh cursor\n\t\t\tif(!skipRefresh){\n\t\t\t\tvar id = this.getCursor();\n\t\t\t\tthis.blockEvent();\n\t\t\t\tthis.setCursor(null);\n\t\t\t\tthis.unblockEvent();\n\t\t\t\tthis.setCursor(id);\n\t\t\t}\n\t\t}\n\t},\n\tgoBack: function(step){\n\t\tstep = (step?(-1)*Math.abs(step):-1);\n\t\treturn history.changeCursor(this, step);\n\t},\n\tgoForward: function(step){\n\t\treturn history.changeCursor(this, step||1);\n\t},\n\tlevelUp: function(id){\n\t\tid = id||this.getCursor();\n\t\tif(id){\n\t\t\tid = this.getParentId(id);\n\t\t\tthis.setCursor(id);\n\t\t}\n\t},\n\tmarkCopy: function(ids){\n\t\tif(ids){\n\t\t\tif(!webix.isArray(ids)){\n\t\t\t\tids = [ids];\n\t\t\t}\n\t\t\tthis._moveData = ids;\n\t\t\tthis._copyFiles = true;\n\t\t}\n\t},\n\tmarkCut: function(ids){\n\t\tif(ids){\n\t\t\tif(!webix.isArray(ids)){\n\t\t\t\tids = [ids];\n\t\t\t}\n\t\t\tthis._moveData = ids;\n\t\t\tthis._copyFiles = false;\n\t\t}\n\t},\n\tpasteFile: function(id){\n\t\tif(webix.isArray(id)){\n\t\t\tid = id[0];\n\t\t}\n\t\tif(id){\n\t\t\tid = id.toString();\n\t\t\tif(this.getItem(id) && this.getItem(id).type == \"folder\"){\n\t\t\t\tif(this._moveData){\n\t\t\t\t\tif(this._copyFiles){\n\t\t\t\t\t\tthis.copyFile(this._moveData,id);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t\tthis.moveFile(this._moveData,id);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\tdownload:function(id){\n\t\tvar url = this.config.handlers.download;\n\t\tif (url)\n\t\t\twebix.send(url, { action:\"download\", source: id });\n\t},\n\tfileExists: function(name,target,id){\n\t\tvar result = false;\n\t\tthis.data.eachChild(target, webix.bind(function(obj){\n\t\t\tif(name == obj.value&&!(id && obj.id==id)){\n\t\t\t\tresult = obj.id;\n\t\t\t}\n\t\t},this));\n\t\treturn result;\n\t},\n\t_refreshActiveFolder: function(){\n\t\tthis.$skipDynLoading = true;\n\t\tthis.$$(this.config.mode).$skipBinding = false;\n\t\tthis.refreshCursor();\n\t},\n\t_setFSId: function(item){\n\t\tvar newId = this.getParentId(item.id)+\"/\"+item.value;\n\t\tif(item.id != newId)\n\t\t\tthis.data.changeId( item.id, newId );\n\t},\n\t_changeChildIds: function(id){\n\t\tthis.data.eachSubItem(id,webix.bind(function(item){\n\t\t\tif(item.value)\n\t\t\t\tthis._setFSId(item);\n\t\t},this));\n\t},\n\t_callbackRename: function(id, value){\n\t\tvar item = this.getItem(id);\n\t\tif(item.value != value){\n\t\t\titem.value = value;\n\t\t\tthis.$$(\"tree\").updateItem(id, { value });\n\t\t\tthis._refreshActiveFolder();\n\t\t\tthis.callEvent(\"onItemRename\", [id]);\n\t\t}\n\t},\n\t_moveFile: function(source,target,copy){\n\t\tvar action = (copy?\"copy\":\"move\"),\n\t\t\tids = [];\n\t\tsource.reverse();\n\t\tfor(var i=0; i<source.length; i++){\n\t\t\tif(this.getItem(source[i])){\n\t\t\t\tvar newId = this.move(source[i],0,this,{parent:target,copy:copy?true:false});\n\t\t\t\tids.push(newId);\n\t\t\t}\n\t\t}\n\n\t\tthis._refreshActiveFolder();\n\t\tvar url = this.config.handlers[action];\n\t\tif (url){\n\t\t\tsave.makeSaveRequest(this, url,{ action: action, source:source.join(\",\"), temp: ids.join(\",\"), target: target.toString() },function(requestData,responseData){\n\t\t\t\tif(responseData && webix.isArray(responseData)){\n\t\t\t\t\tvar ids = requestData.temp.split(\",\");\n\t\t\t\t\tfor(var i=0;i < responseData.length;i++){\n\t\t\t\t\t\tif(responseData[i].id && (responseData[i].id!=ids[i]) && this.data.pull[ids[i]]){\n\t\t\t\t\t\t\tthis.data.changeId(ids[i],responseData[i].id);\n\t\t\t\t\t\t\tif(this.config.fsIds)\n\t\t\t\t\t\t\t\tthis._changeChildIds(responseData[i].id);\n\t\t\t\t\t\t\tif(responseData[i].value){\n\t\t\t\t\t\t\t\tthis._callbackRename(responseData[i].id,responseData[i].value);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis._updateDynSearch();\n\t\t\t});\n\t\t}\n\t},\n\t_updateDynSearch: function(){\n\t\tif(this.$searchResults && this.$searchValue){\n\t\t\tthis.showSearchResults(this.$searchValue);\n\t\t}\n\t},\n\tcopyFile: function(source, target){\n\t\tthis.moveFile(source, target, true);\n\t},\n\tmoveFile:function(source, target, copy){\n\t\tvar i, id, result;\n\t\tif(typeof(source) == \"string\"){\n\t\t\tsource = source.split(\",\");\n\t\t}\n\t\tif(!webix.isArray(source)){\n\t\t\tsource = [source];\n\t\t}\n\t\tif(!target){\n\t\t\ttarget = this.getCursor();\n\t\t}\n\t\telse if(!this.data.branch[target]&&this.getItem(target.toString()).type!=\"folder\"){\n\t\t\ttarget = this.getParentId(target);\n\t\t}\n\n\t\tresult = true;\n\t\ttarget = target.toString();\n\n\t\tfor(i=0; i<source.length; i++){\n\t\t\tid = source[i].toString();\n\t\t\tresult = result&&this._isMovingAllowed(id,target);\n\n\t\t}\n\t\tif(result){\n\t\t\tthis._moveFile(source,target,copy?true:false);\n\t\t}\n\t\telse{\n\t\t\tthis.callEvent(copy?\"onCopyError\":\"onMoveError\", []);\n\t\t}\n\t},\n\tdeleteFile:function(ids,callback){\n\t\tif(typeof(ids) == \"string\"){\n\t\t\tids = ids.split(\",\");\n\t\t}\n\t\tif(!webix.isArray(ids)){\n\t\t\tids = [ids];\n\t\t}\n\t\tfor(var i=0; i<ids.length; i++){\n\t\t\tvar id = ids[i];\n\t\t\tif(this.$$(this.config.mode).isSelected(id))\n\t\t\t\tthis.$$(this.config.mode).unselect(id);\n\t\t\tif(id == this.getCursor())\n\t\t\t\tthis.setCursor(this.getFirstId());\n\t\t\tif(id)\n\t\t\t\tthis.remove(id);\n\t\t}\n\t\tthis._refreshActiveFolder();\n\n\t\tvar url = this.config.handlers.remove;\n\t\tif (url){\n\t\t\tif(callback)\n\t\t\t\tcallback = webix.bind(callback,this);\n\t\t\tsave.makeSaveRequest(this, url,{ action:\"remove\", source:ids.join(\",\") }, callback);\n\t\t}\n\t\telse if(callback){\n\t\t\tcallback.call(this);\n\t\t}\n\n\t},\n\t_createFolder: function(obj,target){\n\t\tthis.add(obj, 0, target);\n\t\tthis._refreshActiveFolder();\n\t\tvar url = this.config.handlers.create;\n\t\tif (url){\n\t\t\tsave.makeSaveRequest(this, url, {\n\t\t\t\tid: obj.id,\n\t\t\t\tsource: obj.value,\n\t\t\t\ttarget: target,\n\t\t\t\taction: \"create\"\n\t\t\t}, function(requestData,responseData){\n\t\t\t\tif(responseData.id){\n\t\t\t\t\tif(requestData.id != responseData.id)\n\t\t\t\t\t\tthis.data.changeId(requestData.id,responseData.id);\n\t\t\t\t\tif(this.config.fsIds)\n\t\t\t\t\t\tthis._changeChildIds(responseData.id);\n\t\t\t\t\tif(responseData.value){\n\t\t\t\t\t\tthis._callbackRename(responseData.id,responseData.value);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t},\n\tcreateFolder: function(target){\n\t\tif(typeof(target) == \"string\"){\n\t\t\ttarget = target.split(\",\");\n\t\t}\n\t\tif(webix.isArray(target)){\n\t\t\ttarget = target[0];\n\t\t}\n\t\tif(target){\n\t\t\ttarget = \"\"+target;\n\t\t\tvar item = this.getItem(target);\n\t\t\tif(!this.data.branch[target] && (item.type != \"folder\")){\n\t\t\t\ttarget = this.getParentId(target);\n\t\t\t}\n\t\t\tvar obj = this.config.templateCreate(item);\n\n\t\t\ttarget = \"\"+target;\n\t\t\tthis._createFolder(obj,target);\n\t\t}\n\t},\n\teditFile: function(id){\n\t\tif(webix.isArray(id)){\n\t\t\tid = id[0];\n\t\t}\n\t\tif(this.getActiveView()&&this.getActiveView().edit)\n\t\t\tthis.getActiveView().edit(id);\n\n\t},\n\trenameFile: function(id,name,field){\n\t\tvar item = this.getItem(id);\n\t\tfield = (field||\"value\");\n\t\tif(item)\n\t\t\titem[field] = name;\n\n\t\tthis.refresh(item ? id : \"\");\n\t\tthis._refreshActiveFolder();\n\t\tthis.callEvent(\"onFolderSelect\",[this.getCursor()]);\n\n\t\tvar url = this.config.handlers.rename;\n\t\tif (url){\n\t\t\tvar obj = { source:id, action:\"rename\", target: name};\n\t\t\tsave.makeSaveRequest(this, url,obj,function(requestData,responseData){\n\t\t\t\tif(responseData.id && this.getItem(requestData.source)){\n\t\t\t\t\tif(requestData.source != responseData.id)\n\t\t\t\t\t\tthis.data.changeId(requestData.source,responseData.id);\n\t\t\t\t\tif(this.config.fsIds)\n\t\t\t\t\t\tthis._changeChildIds(responseData.id);\n\t\t\t\t\tif(responseData.value){\n\t\t\t\t\t\tthis._callbackRename(responseData.id,responseData.value);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis._updateDynSearch();\n\t\t\t});\n\t\t}\n\t},\n\t_isMovingAllowed: function(source,target){\n\t\twhile(target){\n\t\t\tif(target==source || (!this.data.branch[target]&&this.getItem(target.toString()).type != \"folder\")){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\ttarget = this.getParentId(target);\n\t\t}\n\t\treturn true;\n\t},\n\tgetActiveView: function(){\n\t\treturn this._activeView||this.$$(\"tree\")||null;\n\t},\n\tgetActive: function(){\n\t\tvar selected = this.getSelectedFile();\n\t\treturn selected?selected:this.getCursor();\n\t},\n\t/*\n\t * returns the name of the folder selected in Tree\n\t * */\n\tgetCurrentFolder: function(){\n\t\treturn this.$$(\"tree\").getSelectedId();\n\t},\n\t/*\n\t * returns a string or an array with selected file(folder) name(s)\n\t * */\n\tgetSelectedFile: function(){\n\t\tvar result = null,\n\t\t\tselected = this.$$(this.config.mode).getSelectedId();\n\n\t\tif(selected){\n\t\t\tif(!webix.isArray(selected))\n\t\t\t\tresult = selected.toString();\n\t\t\telse{\n\t\t\t\tresult = [];\n\t\t\t\tfor(var i=0; i < selected.length; i++){\n\t\t\t\t\tresult.push(selected[i].toString());\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t},\n\t_openFolder: function(id){\n\t\tif(this.callEvent(\"onBeforeLevelDown\",[id])){\n\t\t\tthis.setCursor(id);\n\t\t\tthis.callEvent(\"onAfterLevelDown\",[id]);\n\t\t}\n\t},\n\t_runFile: function(id){\n\t\tif(this.callEvent(\"onBeforeRun\",[id])){\n\t\t\tthis.download(id);\n\t\t\tthis.callEvent(\"onAfterRun\",[id]);\n\t\t}\n\t},\n\t_onFileDblClick: function(id){\n\t\tid = id.toString();\n\t\tvar item = this.getItem(id);\n\t\tif(item) {\n\t\t\tif (this.data.branch[id] || (item.type == \"folder\"))\n\t\t\t\tthis._openFolder(id);\n\t\t\telse\n\t\t\t\tthis._runFile(id);\n\t\t} else{\n\t\t\t// dynamic loading\n\t\t\tif(this.$$(this.config.mode).filter){\n\t\t\t\titem = this.$$(this.config.mode).getItem(id);\n\t\t\t\tif(item.type != \"folder\"){\n\t\t\t\t\tthis._runFile(id);\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tvar folders = item&&item.parents?item.parents:path.getParentFolders(id);\n\t\t\t\t\tif(folders.length){\n\t\t\t\t\t\tthis.openFolders(folders).then( webix.bind(function(){\n\t\t\t\t\t\t\tthis._openFolder(id);\n\t\t\t\t\t\t},this));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\topenFolders: function(folders){\n\t\treturn loader.openFolders(this, folders);\n\t},\n\t_addElementHotKey: function(key, func, view){\n\t\tvar keyCode = webix.UIManager.addHotKey(key, func, view);\n\t\t(view||this).attachEvent(\"onDestruct\", function(){\n\t\t\twebix.UIManager.removeHotKey(keyCode, func, view);\n\t\t});\n\t},\n\tclearBranch: function(id){\n\t\tloader.clearBranch(this,id);\n\t},\n\tparseData: function(data){\n\t\tloader.parseData(this,data);\n\t},\n\t_getDynMode: function(){\n\t\treturn loader.getDynMode(this);\n\t},\n\tloadDynData: function(url, obj, mode, open){\n\t\tloader.loadDynData(this, url, obj, mode, open);\n\t},\n\tgetUploader: function(){\n\t\treturn \tuploader.getUploader(this);\n\t},\n\tuploadFile: function(id,e){\n\t\treturn uploader.uploadFile(this,id,e);\n\t},\n\thideTree: function(){\n\t\tif(this.callEvent(\"onBeforeHideTree\",[])){\n\t\t\ttree.hideTree(this);\n\t\t\tthis.callEvent(\"onAfterHideTree\",[]);\n\t\t}\n\t},\n\tshowTree: function(){\n\t\tif(this.callEvent(\"onBeforeShowTree\",[])){\n\t\t\ttree.showTree(this);\n\t\t\tthis.callEvent(\"onAfterShowTree\",[]);\n\t\t}\n\t},\n\tdefaults: defaults.values\n},  webix.ProgressBar, webix.IdSpace, webix.ui.layout,webix.TreeDataMove, webix.TreeDataLoader, webix.DataLoader, webix.EventSystem, webix.Settings);\n\n","export function hideTree(view){\n\tif(view.$$(\"treeLayout\")){\n\t\tview.$$(\"treeLayout\").hide();\n\t\tif(view.$$(\"resizer\"))\n\t\t\tview.$$(\"resizer\").hide();\n\t\tif(view.$$(\"sidePanel\"))\n\t\t\tview.$$(\"sidePanel\").show();\n\t}\n}\nexport function showTree(view){\n\tif(view.$$(\"treeLayout\")){\n\t\tview.$$(\"treeLayout\").show();\n\t\tif(view.$$(\"resizer\"))\n\t\t\tview.$$(\"resizer\").show();\n\t\tif(view.$$(\"sidePanel\"))\n\t\t\tview.$$(\"sidePanel\").hide();\n\t}\n}"],"names":["init","view","attachEvent","ready","menu","getMenu","id","e","obj","this","getItem","method","active","getActive","callEvent","event","config","legacyUploader","_uploadPopup","hide","args","webix","html","pos","push","delay","apply","filter","c","getContext","unselectAll","templateName","popup","width","padding","autofocus","css","template","common","name","icon","indexOf","data","getData","batch","value","i18n","filemanager","copy","cut","paste","$template","create","remove","rename","upload","_contextMenu","ui","destructor","type","tree","dragTemplate","i","$level","webix_child_branch","$count","open","folder","dataview","height","margin","templateIcon","actions","back","forward","levelUp","size","date","location","select","sizeLabels","iconsView","tableView","hideTree","showTree","collapseTree","expandTree","saving","errorResponse","replaceConfirmation","createConfirmation","renameConfirmation","yes","no","types","doc","excel","pdf","pp","text","video","image","code","audio","archive","file","protoUI","EditAbility","list","ContextHelper","submenu","$dragHTML","item","ctx","DragControl","getTextSize","posView","offset","$view","x","x_offset","y_offset","index","getColumnIndex","columns","clientX","datatable","defaults","layout","separator","scroll","$skin","skin","$active","buttonHeight","inputHeight","$init","className","value_setter","setValue","values","clearAll","split","parse","getValue","serialize","modes","mode","handlers","structure","fsIds","templateSize","labels","pow","isInt","parseInt","Number","numToStr","decimalDelimiter","groupDelimiter","decimalSize","groupSize","format","templateType","templateDate","_typeof","Date","fullDateFormatStr","templateCreate","icons","uploadProgress","_cursorHistory","extend","PowerArray","$ready","setHandlers","disabledHistory","state","decodeURIComponent","window","hash","setPath","replace","_historyIgnore","_historyCursor","splice","length","pushHistory","path","getCursor","history","replaceState","changeCursor","step","setCursor","sortData","sort","sorter","DataStore","prototype","sorting","folders","files","concat","$skipDynLoading","setDataParsers","dataParser","noFileCache","clearBranch","webix_files","parseData","branch","webix_branch","items","eachChild","_refreshActiveFolder","openDynFolder","ids","defer","showProgress","url","load","action","source","then","hideProgress","convertData","call","lastId","shift","refreshCursor","resolve","getDynMode","parseSearchData","$searchResults","cell","$$","sortState","driver","toObject","getParentFolders","parts","slice","join","makeSaveRequest","callback","showSaveMessage","hideSaveMessage","_saveMessage","error","errorHandler","message","_saveMessageDate","style","position","insertBefore","msg","innerHTML","ajax","get","success","response","getDetails","getRecords","getModeConfig","tooltip","settings","mCell","show","unselect","editStop","addCellConfig","animate","cells","bindData","oldId","newId","pull","changeId","$skipBinding","bind","loadDynData","importSelectedBranch","target","getBranch","importData","applyTemplates","setCellHandlers","_onFileDblClick","_addElementHotKey","getSelectedId","getFirstId","_activeView","removeCss","isVisible","addCss","editor","getTopParentView","row","column","renameFile","context","from","moveFile","readonly","sview","selected","UIManager","setFocus","id0","addMenuHandlers","on_context","webix_view","locate","srcElement","setContext","preventEvent","attachTo","res","menuFilter","count","sel","found","isArray","exists","isSelected","toString","define","isColumnVisible","hideColumn","showColumn","edit","by","dir","as","showSearchResults","headerRowHeight","editable","editaction","drag","navigation","resizeColumn","tabFocus","onContext","label","sync","on_click","webix_tree_child_branch","ev","getState","setState","showItem","hideSearchResults","refresh","isBranchOpen","close","getParentId","setTreeCursor","filterMode","showSubItems","openParents","rows","SVGRect","mainLayout","paddingX","paddingY","cols","btn","getActiveView","goBack","cursor","enable","disable","goForward","up","getPathNames","targetIndex","getIndexById","borderless","search","_code","gravity","minWidth","hidden","sidePanel","toggle","_getDynMode","openAll","expand","closeAll","collapse","modeViews","options","forEach","editValue","table","locale","header","fillspace","_getLocation","changeStructure","newView","vName","newViews","hasOwnProperty","getCellConfig","defConfig","cellConfig","getUI","layoutConf","getViews","struct","arrName","arrs","on","onViewInit","isSVG","getConfig","legacy","formData","urlData","apiOnly","setUploadHandlers","uploader","getUploader","addDropZone","getUploadFolder","_uploaderFolder","add","Math","round","valueOf","save","createFlashUploader","body","_uploader","getBody","TreeStore","provideApi","loader","isUndefined","XMLHttpRequest","_this","_beforeInit","tabControl","selection","defaultSelection","getFirstChildId","_this2","handlers_setter","h","setDefaultHandlers","proxy","download","move","_getParentId","arguments","parent","getPath","reverse","pId","openFolders","pop","names","getSearchData","each","toLowerCase","loadSearchData","params","$searchValue","skipRefresh","blockEvent","unblockEvent","abs","markCopy","_moveData","_copyFiles","markCut","pasteFile","copyFile","send","fileExists","result","_setFSId","_changeChildIds","eachSubItem","_callbackRename","updateItem","_moveFile","temp","requestData","responseData","_updateDynSearch","_isMovingAllowed","deleteFile","_createFolder","createFolder","editFile","field","getSelectedFile","getCurrentFolder","_openFolder","_runFile","parents","dynMode","pItem","promise","reject","key","func","keyCode","addHotKey","removeHotKey","uploadFile","y","fileDialog","ProgressBar","IdSpace","TreeDataMove","TreeDataLoader","DataLoader","EventSystem","Settings"],"mappings":"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"}